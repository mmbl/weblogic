#!/usr/bin/python
if __name__ == '__main__':  
    from wlstModule import *

readTemplate('{{ weblogic_home }}/common/templates/wls/wls.jar')
setOption('AppDir', '{{ domains_home }}/{{ DOMAIN_NAME }}')
setOption('DomainName', '{{ DOMAIN_NAME }}')
setOption('OverwriteDomain', 'true')
setOption('JavaHome', '{{ JAVA_HOME }} ')
setOption('ServerStartMode', 'prod')
cd('/Security/base_domain/User/weblogic')
cmo.setName('{{ DOMAIN_USER }}')
cmo.setUserPassword('{{ DOMAIN_USER_PSWD }}')
cmo.setPassword('{{ DOMAIN_USER_PSWD }}')
cd('/')
writeDomain('{{ domains_home }}/{{ DOMAIN_NAME }}')
closeTemplate()
readDomain('{{ domains_home }}/{{ DOMAIN_NAME }}')
cd('/')
cd('/SecurityConfiguration/{{ DOMAIN_NAME }}')
cmo.setNodeManagerUsername('{{ NODE_MAN_USER }}')
cmo.setNodeManagerPasswordEncrypted('{{ NODE_MAN_USER_PSWD }}')
cd('/Server/' + '{{ SERVER_NAME }}')
set('ListenPort', '{{ LISTEN_PORT }}')
create('{{ SERVER_NAME }}', 'SSL')
cd('SSL/' + '{{ SERVER_NAME }}')
cmo.setHostnameVerificationIgnored(true)
cmo.setHostnameVerifier(None)
cmo.setTwoWaySSLEnabled(false)
cmo.setClientCertificateEnforced(false)
cd('/SecurityConfiguration/test/Realms/myrealm')
cd('AuthenticationProviders/DefaultAuthenticator')
set('ControlFlag', 'SUFFICIENT')
cd('../../')
save()
exit()